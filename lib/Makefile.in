LIBS = -lgdbm #-lefence

LIBOBJECTS = header.o oldrpmdb.o misc.o messages.o rpmerr.o falloc.o \
	     convertdb.o oldrpmfile.o
LIBRPM = librpm.a

WARNINGS = -Wall -Wpointer-arith -Wstrict-prototypes -Wmissing-prototypes 
DEBUG = -g
OPTS = -O2

all: test dump dumpdb

# -----------------------------------------------------------------------

AR = ar r
RANLIB = ranlib

CFLAGS = $(WARNINGS) $(DEBUG) $(OPTS)
LDFLAGS = $(DEBUG) $(LIBS)

test: test.c librpm.a
	$(CC) $(DEBUG) -o $@ test.c librpm.a $(LIBS)

dump: dump.c librpm.a
	$(CC) $(DEBUG) -o $@ dump.c librpm.a $(LIBS)

dumpdb: dumpdb.c librpm.a
	$(CC) $(DEBUG) -o $@ dumpdb.c librpm.a $(LIBS)

$(LIBRPM): $(LIBOBJECTS) 
	$(AR) $@ $(LIBOBJECTS)
	$(RANLIB) $@

clean:
	rm -f *.a *.o *~ test dump test.out
