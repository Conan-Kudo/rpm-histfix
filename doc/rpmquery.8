.TH "RPMQUERY" "8" "29 June 2010" "Red Hat, Inc"
.SH NAME
rpmquery \- RPM Query Tool
.SH SYNOPSIS

\fBrpm\fR {\fB-q|--query\fR} [\fBselect-options\fR] [\fBquery-options\fR]

.SS "select-options"
.PP

 [\fB\fIPACKAGE_NAME\fB\fR] [\fB-a,--all\fR] [\fB-f,--file \fIFILE\fB\fR]
 [\fB-g,--group \fIGROUP\fB\fR] {\fB-p,--package \fIPACKAGE_FILE\fB\fR]
 [\fB--hdrid \fISHA1\fB\fR] [\fB--pkgid \fIMD5\fB\fR] [\fB--tid \fITID\fB\fR]
 [\fB--querybynumber \fIHDRNUM\fB\fR] [\fB--triggeredby \fIPACKAGE_NAME\fB\fR]
 [\fB--whatprovides \fICAPABILITY\fB\fR] [\fB--whatrequires \fICAPABILITY\fB\fR]

.SS "query-options"
.PP

 [\fB--changelog\fR] [\fB-c,--configfiles\fR] [\fB--conflicts\fR]
 [\fB-d,--docfiles\fR] [\fB--dump\fR] [\fB--filesbypkg\fR] [\fB-i,--info\fR]
 [\fB--last\fR] [\fB-l,--list\fR] [\fB--provides\fR]
 [\fB--qf,--queryformat \fIQUERYFMT\fB\fR] [\fB-R,--requires\fR]
 [\fB--scripts\fR] [\fB-s,--state\fR] [\fB--triggers,--triggerscripts\fR]

.SS "QUERY OPTIONS"
.PP
The general form of an rpm query command is 
.PP

\fBrpm\fR {\fB-q|--query\fR} [\fBselect-options\fR] [\fBquery-options\fR]

.PP
You may specify the format that package information should be
printed in. To do this, you use the

 \fB--qf|--queryformat\fR \fB\fIQUERYFMT\fB\fR

option, followed by the \fIQUERYFMT\fR
format string.  Query formats are modified versions of the
standard \fBprintf(3)\fR formatting. The format
is made up of static strings (which may include standard C
character escapes for newlines, tabs, and other special
characters) and \fBprintf(3)\fR type formatters.
As \fBrpm\fR already knows the type to print, the
type specifier must be omitted however, and replaced by the name
of the header tag to be printed, enclosed by \fB{}\fR
characters. Tag names are case insensitive, and the leading
\fBRPMTAG_\fR portion of the tag name may be omitted
as well.
.PP
Alternate output formats may be requested by following
the tag with \fB:\fItypetag\fB\fR.
Currently, the following types are supported:
.TP
\fB:armor\fR
Wrap a public key in ASCII armor.
.TP
\fB:arraysize\fR
Display number of elements in array tags.
.TP
\fB:base64\fR
Encode binary data using base64.
.TP
\fB:date\fR
Use strftime(3) "%c" format.
.TP
\fB:day\fR
Use strftime(3) "%a %b %d %Y" format.
.TP
\fB:depflags\fR
Format dependency comparison operator.
.TP
\fB:deptype\fR
Format dependency type.
.TP
\fB:expand\fR
Perform macro expansion.
.TP
\fB:fflags\fR
Format file flags.
.TP
\fB:fstate\fR
Format file state.
.TP
\fB:fstatus\fR
Format file verify status.
.TP
\fB:hex\fR
Format in hexadecimal.
.TP
\fB:octal\fR
Format in octal.
.TP
\fB:perms\fR
Format file permissions.
.TP
\fB:pgpsig\fR
Display signature fingerprint and time.
.TP
\fB:shescape\fR
Escape single quotes for use in a script.
.TP
\fB:triggertype\fR
Display trigger suffix.
.TP
\fB:vflags\fR
File verification flags.
.TP
\fB:xml\fR
Wrap data in simple xml markup.
.PP
For example, to print only the names of the packages queried,
you could use \fB%{NAME}\fR as the format string.
To print the packages name and distribution information in
two columns, you could use \fB%-30{NAME}%{DISTRIBUTION}\fR.
\fBrpm\fR will print a list of all of the tags it knows about when it
is invoked with the \fB--querytags\fR argument.
.PP
There are two subsets of options for querying: package selection,
and information selection.
.SS "PACKAGE SELECTION OPTIONS:"
.PP
.TP
\fB\fIPACKAGE_NAME\fB\fR
Query installed package named \fIPACKAGE_NAME\fR.
.TP
\fB-a, --all\fR
Query all installed packages.
.TP
\fB-f, --file \fIFILE\fB\fR
Query package owning \fIFILE\fR.
.TP
\fB-g, --group \fIGROUP\fB\fR
Query packages with the group of \fIGROUP\fR.
.TP
\fB--hdrid \fISHA1\fB\fR
Query package that contains a given header identifier, i.e. the
\fISHA1\fR digest of the immutable header region.
.TP
\fB-p, --package \fIPACKAGE_FILE\fB\fR
Query an (uninstalled) package \fIPACKAGE_FILE\fR.
The \fIPACKAGE_FILE\fR may be specified
as an \fBftp\fR or \fBhttp\fR style URL, in
which case the package header will be downloaded and queried.
See \fBFTP/HTTP OPTIONS\fR for information on
\fBrpm\fR's internal
\fBftp\fR and
\fBhttp\fR
client support. The \fIPACKAGE_FILE\fR argument(s),
if not a binary package, will be interpreted as an ASCII package
manifest unless \fB--nomanifest\fR option is used.  
In manifests, comments are permitted, starting with a '#', and each
line of a package manifest file may include white space separated
glob expressions, including URL's,
that will be expanded to paths that are substituted in place of
the package manifest as additional \fIPACKAGE_FILE\fR
arguments to the query.
.TP
\fB--pkgid \fIMD5\fB\fR
Query package that contains a given package identifier, i.e. the
\fIMD5\fR digest of the combined header and
payload contents.
.TP
\fB--querybynumber \fIHDRNUM\fB\fR
Query the \fIHDRNUM\fRth database entry
directly; this is useful only for debugging.
.TP
\fB--tid \fITID\fB\fR
Query package(s) that have a given \fITID\fR
transaction identifier. A unix time stamp is currently used as a
transaction identifier. All package(s) installed or erased within
a single transaction have a common identifier.
.TP
\fB--triggeredby \fIPACKAGE_NAME\fB\fR
Query packages that are triggered by package(s)
\fIPACKAGE_NAME\fR.
.TP
\fB--whatprovides \fICAPABILITY\fB\fR
Query all packages that provide the \fICAPABILITY\fR capability.
.TP
\fB--whatrequires \fICAPABILITY\fB\fR
Query all packages that require \fICAPABILITY\fR for proper functioning.
.SS "PACKAGE QUERY OPTIONS:"
.PP
.TP
\fB--changelog\fR
Display change information for the package.
.TP
\fB-c, --configfiles\fR
List only configuration files (implies \fB-l\fR).
.TP
\fB--conflicts\fR
List capabilities this package conflicts with.
.TP
\fB-d, --docfiles\fR
List only documentation files (implies \fB-l\fR).
.TP
\fB--dump\fR
Dump file information as follows (implies \fB-l\fR):
.sp
.RS

.nf
path size mtime filedigest mode owner group isconfig isdoc rdev symlink
	
.fi
.RE
.TP
\fB--filesbypkg\fR
List all the files in each selected package.
.TP
\fB-i, --info\fR
Display package information, including name, version, and description.
This uses the \fB--queryformat\fR if one was specified.
.TP
\fB--last\fR
Orders the package listing by install time such that the latest
packages are at the top.
.TP
\fB-l, --list\fR
List files in package.
.TP
\fB--provides\fR
List capabilities this package provides.
.TP
\fB-R, --requires\fR
List capabilities on which this package depends.
.TP
\fB--scripts\fR
List the package specific scriptlet(s) that are used as part
of the installation and uninstallation processes.
.TP
\fB-s, --state\fR
Display the \fIstates\fR of files in the package
(implies \fB-l\fR).  The state of each file is one of
\fInormal\fR,
\fInot installed\fR, or
\fIreplaced\fR.
.TP
\fB--triggers, --triggerscripts\fR
Display the trigger scripts, if any, which are contained in
the package.

.SH "SEE ALSO"

.nf
\fBpopt\fR(3),
\fBrpm\fR(8),
\fBrpmdb\fR(8),
\fBrpmkeys\fR(8),
\fBrpmsign\fR(8),
\fBrpmquery\fR(8),
\fBrpmverify\fR(8),
\fBrpm2cpio\fR(8),
\fBrpmbuild\fR(8),
\fBrpmspec\fR(8),
.fi

\fBrpmquery --help\fR - as rpm supports customizing the options via popt aliases 
it's impossible to guarantee that what's described in the manual matches 
what's available.


\fBhttp://www.rpm.org/ <URL:http://www.rpm.org/>
\fR
.SH "AUTHORS"

.nf
Marc Ewing <marc@redhat.com>
Jeff Johnson <jbj@redhat.com>
Erik Troan <ewt@redhat.com>
Panu Matilainen <pmatilai@redhat.com>
.fi
